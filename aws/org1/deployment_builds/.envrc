#!/usr/bin/env bash
set +x # hide secret env values from output

if [[ "true" == "$CI" ]]; then
  if ! type op &>/dev/null; then
    echo "CI=$CI"
    echo "op: command not found"
    set -x
    exit 0
  fi
fi

set +x # hide secret env values from output

TF_VAR_aws_account_id=$(op read "op://Private/1pcli-aws-org1/aws_account_id_deployment_builds")
export TF_VAR_aws_account_id

AWS_ACCESS_KEY_ID=$(op read "op://Private/1pcli-aws-org1-deployment_builds/awstempcredentials/AWS_ACCESS_KEY_ID")
export AWS_ACCESS_KEY_ID
AWS_SECRET_ACCESS_KEY=$(op read "op://Private/1pcli-aws-org1-deployment_builds/awstempcredentials/AWS_SECRET_ACCESS_KEY")
export AWS_SECRET_ACCESS_KEY
AWS_SESSION_TOKEN=$(op read "op://Private/1pcli-aws-org1-deployment_builds/awstempcredentials/AWS_SESSION_TOKEN")
export AWS_SESSION_TOKEN
